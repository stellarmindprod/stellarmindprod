{% extends "layout.html" %}

{% block title %}Login - StellarMind Prod{% endblock %}

{% block head %}
    {{ super() }} <!-- Include base styles from layout.html -->
    <style>
        .login-container {
            max-width: 400px;
            margin: 2rem auto; /* Reduced top margin */
            padding: 2.5rem;
            background-color: #fff;
            border-radius: 12px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
            text-align: center;
        }
        .login-container .logo-icon { /* Optional: Add an icon if no image */
            font-size: 3rem;
            color: #0d6efd; /* Bootstrap blue */
            margin-bottom: 1rem;
        }
        .login-container h1 {
            margin-bottom: 0.5rem;
            color: #212529; /* Darker text */
            font-size: 1.8rem;
        }
        .login-container .subtitle {
            color: #6c757d; /* Bootstrap muted */
            margin-bottom: 2rem;
            font-size: 1rem;
        }
        .input-group {
            margin-bottom: 1.25rem;
            position: relative;
            text-align: left; /* Align icon and input */
        }
        .input-group i {
            position: absolute;
            left: 12px;
            top: 50%;
            transform: translateY(-50%);
            color: #adb5bd; /* Lighter icon */
            pointer-events: none; /* Make icon unclickable */
        }
        .input-group input {
            width: 100%;
            padding: 12px 12px 12px 40px; /* Adjusted padding for icon */
            border: 1px solid #ced4da; /* Bootstrap border */
            border-radius: 8px;
            font-size: 1rem;
            box-sizing: border-box; /* Include padding in width */
            transition: border-color 0.3s ease, box-shadow 0.3s ease;
        }
        .input-group input:focus {
             border-color: #86b7fe; /* Focus color */
             box-shadow: 0 0 0 0.25rem rgba(13, 110, 253, 0.25); /* Focus shadow */
             outline: none;
        }
        .options-group {
            display: flex;
            justify-content: flex-end; /* Align link to the right */
            align-items: center; /* Vertical alignment */
            margin-top: -0.5rem; /* Pull up slightly */
            margin-bottom: 1.5rem;
            font-size: 0.9rem;
        }
        .forgot-password-link a {
            color: #0d6efd;
            text-decoration: none;
        }
         .forgot-password-link a:hover {
            text-decoration: underline;
         }
        .btn-login { /* Specific class for login button */
            width: 100%;
            padding: 12px;
            background-color: #0d6efd;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.1s ease;
        }
        .btn-login:hover {
            background-color: #0b5ed7;
        }
         .btn-login:active {
            transform: scale(0.98); /* Click effect */
        }
        .signup-link {
            margin-top: 2rem;
            color: #6c757d;
            font-size: 0.95rem;
        }
        .signup-link a {
            color: #0d6efd;
            font-weight: 600;
            text-decoration: none;
        }
        .signup-link a:hover {
            text-decoration: underline;
        }
        /* Ensure flash messages have enough space */
        .login-container .flash-messages {
             margin-top: 1.5rem;
             margin-bottom: 0; /* Reset margin if needed */
        }

        @media (max-width: 480px) {
            .login-container {
                padding: 1.5rem;
                margin: 1rem;
            }
            .login-container h1 { font-size: 1.6rem; }
            .input-group input { padding: 10px 10px 10px 35px; }
            .btn-login { font-size: 1rem; padding: 10px; }
        }

    </style>
{% endblock %}

{% block content %}
<div class="login-container">
     <div class="logo-icon"><i class="fas fa-brain"></i></div> <!-- Simple Icon -->
    <h1>Login</h1>
    <p class="subtitle">Access your StellarMind Prod account</p>

    <!-- Display Flash Messages (moved inside container) -->
    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            <div class="flash-messages">
            {% for category, message in messages %}
                <div class="alert alert-{{ category or 'info' }}">{{ message }}</div>
            {% endfor %}
            </div>
        {% endif %}
    {% endwith %}

    <form method="POST" action="{{ url_for('login_page') }}">
        <div class="input-group">
            <input type="text" id="username" name="username" placeholder="Roll No / Username" required aria-label="Username or Roll Number">
             <i class="fas fa-user"></i>
        </div>
        <div class="input-group">
            <input type="password" id="password" name="password" placeholder="Password" required aria-label="Password">
             <i class="fas fa-lock"></i>
        </div>
        <div class="options-group">
             <span class="forgot-password-link">
                <a href="{{ url_for('forgot_password_page') }}">Forgot Password?</a>
             </span>
        </div>
        <button type="submit" class="btn-login">Login</button>
    </form>

    <p class="signup-link">
        Don't have an account? <a href="{{ url_for('signup_page') }}">Sign Up</a>
        <!-- Add Teacher signup link if needed -->
        <!-- | <a href="{{ url_for('teacher_signup_page') }}">Teacher Signup</a> -->
    </p>
</div>
{% endblock %}

{% block scripts %}
    {{ super() }} <!-- Include base scripts from layout.html if any -->
    <script>
        // Minimal JS for potential future enhancements like show/hide password
        // Login logic itself is handled by Flask.
    </script>
{% endblock %}

